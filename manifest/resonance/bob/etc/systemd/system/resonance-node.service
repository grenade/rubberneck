[Unit]
Description=resonance node
Wants=network-online.target
After=network-online.target
Requires=resonance-miner.service
After=resonance-miner.service
Requires=substrate-telemetry-shard.service
After=substrate-telemetry-shard.service
ConditionFileIsExecutable=/usr/local/bin/resonance-node
ConditionPathExists=/var/lib/resonance/%l-node.key

[Service]
User=resonance
Group=resonance
ExecStart=/usr/local/bin/quantus-node \
    --chain live_resonance \
    --validator \
    --name %l \
    --base-path /var/lib/resonance \
    --node-key-file /var/lib/resonance/chains/resonance/network/secret_dilithium \
    --rewards-address qzn6C9EKUpuNPm5qbe5jSq7uiCHV7ruixuzNM4DQQQGZxe2du \
    --prometheus-external \
    --prometheus-port 9615 \
    --rpc-methods auto \
    --unsafe-rpc-external \
    --rpc-port 9944 \
    --rpc-cors all \
    --in-peers 256 \
    --out-peers 256 \
    --port 30201 \
    --public-addr /dns/a1.t.res.fm/tcp/30201/p2p/QmYpbayBgKbhfHGn2kNWWhh3DHwBnPaLDMYvaGmT78oAP7 \
    --bootnodes \
        /dns/a2.t.res.fm/tcp/30203/p2p/QmeN9H9CBdBESd6wib9xetPiYsCLYPTAJn8sxajWi2Bjkb \
        /dns/a3.t.res.fm/tcp/30202/p2p/QmQLf3wj7KqqtTjtrq7iQZY5JokQ3k7HHLGe5hNvHSxnFr \
    --telemetry-url 'ws://127.0.0.1:8001/submit 1' \
    --external-miner-url http://127.0.0.1:9833
Restart=always
RestartSec=120

[Install]
WantedBy=multi-user.target
