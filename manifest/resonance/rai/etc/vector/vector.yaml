sources:
  journald:
    type: journald
    include_units:
      - resonance-miner.service
      - resonance-node.service
      - sshd.service
      - substrate-telemetry-shard.service
transforms:
  shape_for_gelf:
    type: remap
    inputs:
      - journald
    source: |
      .host = get_hostname!()
      .service = ._SYSTEMD_UNIT
      if exists(.PRIORITY) { .level = to_int!(.PRIORITY) }
      .short_message = string!(.MESSAGE)
      .full_message = string!(.MESSAGE)
      del(.SYSLOG_FACILITY, ._SOURCE_MONOTONIC_TIMESTAMP)
sinks:
  graylog:
    type: gelf
    inputs:
      - shape_for_gelf
    address: "tcp://logs.res.fm:12201"
    compression: gzip
